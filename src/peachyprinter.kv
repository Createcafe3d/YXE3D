#:kivy 1.9.0
#:import _ __main__._
#:import FloatInput ui.custom_widgets.FloatInput


<MyScreenManager>:

<SettingsSelector>:
    size_hint: [0.6, 0.6]
    title: _('Settings Selection')
    BoxLayout:
        orientation: 'vertical'
        I18NButton:
            text_source: _('Laser Calibration')
            on_release: root.dismiss(); app.root.current = 'calibrationui'
        I18NButton:
            text_source: _('Dripper Calibration')
            on_release: root.dismiss(); app.root.current = 'drippercalibrationui'
        I18NButton:
            text_source: _('Resin Curing Calibration')
            on_release: root.dismiss(); app.root.current = 'curetestui'
        I18NButton:
            text_source: _('Advanced Settings')
            on_release: app.open_settings()
        I18NButton:
            text_source: _('Close')
            on_release: root.dismiss()

<MainUI>:
    name: 'mainui'
    id: mainui
    FloatLayout:
        BoxLayout:
            size: root.size
            pos: root.pos
            orientation: 'horizontal'
            BoxLayout:
                size_hint: [0.3, 1.0]
                orientation: 'vertical'
                I18NButton:
                    text_source: _('Print from file')
                    on_release: mainui.show_load()
                I18NButton:
                    text_source: _('Print from library')
                    on_release: app.root.current = 'libraryui'
            Image:
                source: 'resources/logo.png'
                allow_stretch: True
                keep_ratio: True
        FloatLayout:
            Button:
                background_color: 1,1,1,0
                size_hint: [0.06, 0.06]
                pos: [root.size[0] - root.size[0] * 0.06, root.size[1] - root.size[1] * 0.06 ]
                on_release: root.setting_selected()
                Image:
                    pos: self.parent.pos
                    size: self.parent.size
                    source: 'resources/icons/settings-up.png'
<LoadDialog>:
    BoxLayout:
        orientation: 'vertical'
        BoxLayout:
            orientation: "vertical"
            FileChooserListView:
                id: filechooser
                filters: ['*.gcode']
                path: root.last_directory
        BoxLayout:
            size_hint_y: None
            height: 30
            I18NButton:
                text_source: _('Cancel')
                on_release: root.cancel()

            I18NButton:
                text_source: _('Load')
                on_release: root.load(filechooser.path, filechooser.selection)

